# Predict your Click-out: Modeling User-Item Interactions and Session Actions in an Ensemble Learning Fashion

This repository contains the code to reproduce the results obtained by our team "POLINKS" in the RecSys Challenge 2019 hosted by Trivago.

## Approach

We used an ensemble of three different methods

- Matrix Factorization + Gradient boosting
- RNN
- Rule Based algorithm

## Producing recommendations

In order to reproduce the results obtained by our team is necessary to follow this steps:

### Dataset Split

We used an additional split with respect to the official one provided by Trivago in order to train our XGBoost model.

To generate a random split that follows the same structure of the original one, use the following commands:

```bash
python3 ./SplitDataset/split.py
```

### Run Matrix Factorization

To run the MF part of our algorithm, move the two dataset generated by the previous split in the SetupScript folder and run the command

```bash
python3 ./SetupScript/Setup.py
```

This command runs the algorithm with the best configuration we found.

To change this parameters just type:

```bash
python3 ./SetupScript/Setup.py --help
```

and select a different configuration by passing the desired parameters.



### Run RNN



### Run Rule Based

To run the Rule Based part of out algorithm, copy the test.csv dataset to be predicted in the desired folder(by default we consider code and csv files to be in the SetupScript folder) and run the command below:

'''bash
python3 ./SetupScript/Setup.py --path_to_read ./SetupScript/test.csv --path_to_write ./SetupScript/
'''

The output file name is 'Rule_based_Test_Dev.csv' and is placed in the specified directory.
There are no parameters to be set in this part of the solution.


## Ensemble the results

We used the Borda count election method to integrate the results of the MF and Rule Based algorithm.

To reproduce the final submission in mandatory to move the submission generated by the two algorithm in the folder Ensemble.

The command to generate the submission is the following:

```bash
python3 ./Ensemble/borda.py --submissionmf "submission_mfxgboost.csv" --submissionrb "submission_rulebased.csv" --outputfile "submission_ensemble_polinks.csv"
```

